<ng-template #opResult>
  <app-bd-bulk-operation-result [bulkOpResult]="bulkOpResult"></app-bd-bulk-operation-result>
</ng-template>

<app-bd-dialog [loadingWhen$]="loading$">
  <app-bd-dialog-toolbar header="Assign Permission" [panel]="true" [route]="['..']"></app-bd-dialog-toolbar>
  <app-bd-dialog-content>
    <form #form="ngForm" (ngSubmit)="onSave()" class="flex flex-col gap-1">
      <ng-container *ngIf="!(loading$ | async)">
        <p>An existing permission on the selected scope will be replaced.</p>
        <app-bd-form-select
          [values]="scopes$ | async"
          name="scope"
          [labels]="labels$ | async"
          [(ngModel)]="assignScope"
          label="Select Permission Scope"
        ></app-bd-form-select>
        <app-bd-form-select
          [values]="allPerms"
          label="Permission"
          name="permission"
          [(ngModel)]="assignPerm"
          required
        ></app-bd-form-select>
        <app-bd-button
          color="primary"
          [collapsed]="false"
          text="Save"
          icon="save"
          [disabled]="form.invalid || !(bulk.selection$ | async).length"
        ></app-bd-button>
      </ng-container>
    </form>
  </app-bd-dialog-content>
</app-bd-dialog>
